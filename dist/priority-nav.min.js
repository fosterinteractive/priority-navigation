/*
 * priority-nav - v1.0.12 | (c) 2016 @gijsroge | MIT license
 * Repository: https://github.com/gijsroge/priority-navigation.git
 * Description: Priority+ pattern navigation that hides menu items if they don't fit on screen.
 * Demo: http://gijsroge.github.io/priority-nav.js/
 */
(function(a,b){typeof define==='function'&&define.amd?define('priorityNav',b(a)):typeof exports==='object'?module.exports=b(a):a.priorityNav=b(a);}(window||this,function(E){'use strict';function F(b,d,c){var a;return function(){var e=this,f=arguments;var g=function(){a=null,c||b.apply(e,f);};var h=c&&!a;clearTimeout(a),a=setTimeout(g,d),h&&b.apply(e,f);};}var d={};var f=[];var m=!!document.querySelector&&!!E.addEventListener;var a={};var o=0;var q=0;var r,t,u,e,b,c,B,g;var h=0;var z={initClass:'js-priorityNav',mainNavWrapper:'nav',mainNav:'ul',navDropdownClassName:'nav__dropdown',navDropdownToggleClassName:'nav__dropdown-toggle',navDropdownLabel:'more',navDropdownBreakpointLabel:'menu',breakPoint:500,throttleDelay:50,offsetPixels:0,count:!0,moved:function(){},movedBack:function(){}};var k=function(a,d,e){if(Object.prototype.toString.call(a)==='[object Object]')for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&d.call(e,a[c],c,a);else for(var b=0,f=a.length;b<f;b++)d.call(e,a[b],b,a);};var A=function(a,b,d){var c=b.charAt(0);for(;a&&a!==document;a=a.parentNode)if(c==='.'){if(a.classList.contains(b.substr(1)))return a;else if(a.classList.contains(d.substr(1)))return a;}else if(c==='#'){if(a.id===b.substr(1))return a;}else if(c==='['&&a.hasAttribute(b.substr(1,b.length-2)))return a;return!1;};var v=function(b,c){var a={};return k(b,function(d,c){a[c]=b[c];}),k(c,function(d,b){a[b]=c[b];}),a;};var l=function(b,c){if(b.classList)b.classList.toggle(c);else{var a=b.className.split(' ');var d=a.indexOf(c);d>=0?a.splice(d,1):a.push(c),b.className=a.join(' ');}};var w=function(a,d){if(g=document.createElement('span'),b=document.createElement('ul'),c=document.createElement('button'),c.innerHTML=d.navDropdownLabel,c.setAttribute('aria-controls','menu'),c.setAttribute('type','button'),b.setAttribute('aria-hidden','true'),a.querySelector(e).parentNode!==a){console.warn('mainNav is not a direct child of mainNavWrapper, double check please');return;}a.insertAfter(g,a.querySelector(e)),g.appendChild(c),g.appendChild(b),b.classList.add(d.navDropdownClassName),b.classList.add('priority-nav__dropdown'),c.classList.add(d.navDropdownToggleClassName),c.classList.add('priority-nav__dropdown-toggle'),g.classList.add(d.navDropdownClassName+'-wrapper'),g.classList.add('priority-nav__wrapper'),a.classList.add('priority-nav');};var x=function(b){var a=window.getComputedStyle(b);var c=parseFloat(a.paddingLeft)+parseFloat(a.paddingRight);return b.clientWidth-c;};var y=function(){var a=document,b=window;var d=a.compatMode&&a.compatMode==='CSS1Compat'?a.documentElement:a.body;var c=d.clientWidth;var e=d.clientHeight;return b.innerWidth&&c>b.innerWidth&&(c=b.innerWidth,e=b.innerHeight),{width:c,height:e};};var s=function(c){t=x(c),c.querySelector(b).parentNode===c?B=c.querySelector(b).offsetWidth:B=0,u=C(c)+a.offsetPixels,h=y().width;};d.doesItFit=function(c){var g=c.getAttribute('instance')===0?g:a.throttleDelay;o++,F(function(){var g=c.getAttribute('instance');s(c);while(t<=u&&c.querySelector(e).children.length>0||h<a.breakPoint&&c.querySelector(e).children.length>0)d.toDropdown(c,g),s(c,g),h<a.breakPoint&&i(c,g,a.navDropdownBreakpointLabel);while(t>=f[g][f[g].length-1]&&h>a.breakPoint)d.toMenu(c,g),h>a.breakPoint&&i(c,g,a.navDropdownLabel);f[g].length<1&&(c.querySelector(b).classList.remove('show'),i(c,g,a.navDropdownLabel)),c.querySelector(e).children.length<1?(c.classList.add('is-empty'),i(c,g,a.navDropdownBreakpointLabel)):c.classList.remove('is-empty'),j(c,g);},g)();};var j=function(a,b){f[b].length<1?(a.querySelector(c).classList.add('priority-nav-is-hidden'),a.querySelector(c).classList.remove('priority-nav-is-visible'),a.classList.remove('priority-nav-has-dropdown'),a.querySelector('.priority-nav__wrapper').setAttribute('aria-haspopup','false')):(a.querySelector(c).classList.add('priority-nav-is-visible'),a.querySelector(c).classList.remove('priority-nav-is-hidden'),a.classList.add('priority-nav-has-dropdown'),a.querySelector('.priority-nav__wrapper').setAttribute('aria-haspopup','true'));};var p=function(a,b){a.querySelector(c).setAttribute('priorityNav-count',f[b].length);};var i=function(a,d,b){a.querySelector(c).innerHTML=b;};d.toDropdown=function(c,d){c.querySelector(b).firstChild&&c.querySelector(e).children.length>0?c.querySelector(b).insertBefore(c.querySelector(e).lastElementChild,c.querySelector(b).firstChild):c.querySelector(e).children.length>0&&c.querySelector(b).appendChild(c.querySelector(e).lastElementChild),f[d].push(u),j(c,d),c.querySelector(e).children.length>0&&a.count&&p(c,d),a.moved();},d.toMenu=function(c,d){c.querySelector(b).children.length>0&&c.querySelector(e).appendChild(c.querySelector(b).firstElementChild),f[d].pop(),j(c,d),c.querySelector(e).children.length>0&&a.count&&p(c,d),a.movedBack();};var C=function(d){var b=d.childNodes;var c=0;for(var a=0;a<b.length;a++)b[a].nodeType!==3&&(isNaN(b[a].offsetWidth)||(c+=b[a].offsetWidth));return c;};var D=function(a,e){window.attachEvent?window.attachEvent('onresize',function(){d.doesItFit&&d.doesItFit(a);}):window.addEventListener&&window.addEventListener('resize',function(){d.doesItFit&&d.doesItFit(a);},!0),a.querySelector(c).addEventListener('click',function(){l(a.querySelector(b),'show'),l(this,'is-open'),l(a,'is-open'),-1!==a.className.indexOf('is-open')?a.querySelector(b).setAttribute('aria-hidden','false'):(a.querySelector(b).setAttribute('aria-hidden','true'),a.querySelector(b).blur());}),document.addEventListener('click',function(d){!A(d.target,'.'+e.navDropdownClassName,'.'+e.navDropdownToggleClassName)&&d.target!==a.querySelector(c)&&(a.querySelector(b).classList.remove('show'),a.querySelector(c).classList.remove('is-open'),a.classList.remove('is-open'));}),document.onkeydown=function(a){a=a||window.event,a.keyCode===27&&(document.querySelector(b).classList.remove('show'),document.querySelector(c).classList.remove('is-open'),r.classList.remove('is-open'));};};Element.prototype.remove=function(){this.parentElement.removeChild(this);},NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(var a=0,b=this.length;a<b;a++)this[a]&&this[a].parentElement&&this[a].parentElement.removeChild(this[a]);},d.destroy=function(){if(!a)return;document.documentElement.classList.remove(a.initClass),g.remove(),a=null,delete d.init,delete d.doesItFit;},m&&typeof Node!=='undefined'&&(Node.prototype.insertAfter=function(a,b){this.insertBefore(a,b.nextSibling);});var n=function(b){var a=b.charAt(0);return a==='.'||a==='#'?!1:!0;};return d.init=function(h){if(a=v(z,h||{}),!m&&typeof Node==='undefined'){console.warn("This browser doesn't support priorityNav");return;}if(!(n(a.navDropdownClassName)&&n(a.navDropdownToggleClassName))){console.warn('No symbols allowed in navDropdownClassName & navDropdownToggleClassName. These are not selectors.');return;}var g=document.querySelectorAll(a.mainNavWrapper);k(g,function(g){if(f[q]=[],g.setAttribute('instance',q++),r=g,!r){console.warn("couldn't find the specified mainNavWrapper element");return;}if(e=a.mainNav,!g.querySelector(e)){console.warn("couldn't find the specified mainNav element");return;}if(w(g,a),b='.'+a.navDropdownClassName,!g.querySelector(b)){console.warn("couldn't find the specified navDropdown element");return;}if(c='.'+a.navDropdownToggleClassName,!g.querySelector(c)){console.warn("couldn't find the specified navDropdownToggle element");return;}D(g,a),d.doesItFit(g);}),o++,document.documentElement.classList.add(a.initClass);},d;}));